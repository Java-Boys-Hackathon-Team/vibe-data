# Vibe Data ‚Äî AI-–∞–≥–µ–Ω—Ç –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ SQL –∏ DDL

**Vibe Data** ‚Äî —ç—Ç–æ –ò–ò-–∞–≥–µ–Ω—Ç –Ω–∞ –±–∞–∑–µ LLM, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö (DDL), –Ω–∞–±–æ—Ä —á–∞—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö
SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏ —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è JDBC, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏—Ö –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç:

* –Ω–æ–≤—ã–π –Ω–∞–±–æ—Ä DDL –¥–ª—è —É–ª—É—á—à–µ–Ω–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã,
* –º–∏–≥—Ä–∞—Ü–∏–∏ (`INSERT ... SELECT ...`) –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –¥–∞–Ω–Ω—ã—Ö,
* –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã (—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º `queryid`).

–û—Å–Ω–æ–≤–Ω–∞—è —Ü–µ–ª—å ‚Äî **—É—Å–∫–æ—Ä–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Å–Ω–∏–∂–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è** –≤ lakehouse-—Å—Ç–µ–∫–µ (Trino + Iceberg +
S3) –∏ –¥—Ä—É–≥–∏—Ö –°–£–ë–î.

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

* –ö–æ–º–∞–Ω–¥–∞: Java Boys
* –†—É—Å—Ç–∞–º –ö—É—Ä–∞–º—à–∏–Ω ‚Äî https://t.me/KuramshinRustam | üìû +7 (952) 584-34-99
* –†—É—Å—Ç–∞–º –ì—É–ª—è–º–æ–≤ ‚Äî https://t.me/gulyamovrustam | üìû +7 (912) 321-88-19
* –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –Ø–Ω—á–∏–π ‚Äî https://t.me/AlexYanchiy_ru | üìû +7 (978) 127-77-34
* –†—É—Å—Ç–∞–º –ó—É–ª–∫–∞—Ä–Ω–∏–µ–≤ ‚Äî https://t.me/WerderR | üìû +7 (919) 883-84-60

---

## –ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è

[–°–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é Vibe Data](./Java_Boys_Vibe_Data_–°–∏—Å—Ç–µ–º–∞_—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π_–ø–æ_–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏_–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏_Data_Lakehouse.pdf)

## Swagger / OpenAPI

[https://api.vibe-data.javaboys.ru/swagger-ui/index.html](https://api.vibe-data.javaboys.ru/swagger-ui/index.html)

---

## –¶–µ–ª–∏ –∏ –∑–∞–¥–∞—á–∏

* –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞ —Å—á—ë—Ç:

  * –¥–µ–Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏,
  * –ø–∞—Ä—Ç–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏,
  * –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–Ω–∏—è SQL.
* –°–Ω–∏–∂–µ–Ω–∏–µ –∑–∞—Ç—Ä–∞—Ç –Ω–∞ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.
* –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã DBA/Data Engineers —Å –ø–æ–º–æ—â—å—é LLM + —ç–≤—Ä–∏—Å—Ç–∏–∫.
* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –¢–ó –∫–æ–Ω–∫—É—Ä—Å–∞:

  * –ø–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –æ–±—ä–µ–∫—Ç–∞–º `<catalog>.<schema>.<table>`,
  * `CREATE SCHEMA` –ø–µ—Ä–≤—ã–º –≤ DDL,
  * —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ `queryid`.

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ —Å—Ç–µ–∫

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫:**
Java 21, Spring Boot 3, Spring AI, PostgreSQL, Docker, Trino JDBC, Redis, MinIO.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**

1. **REST API** (Spring Boot): —ç–Ω–¥–ø–æ–π–Ω—Ç—ã `/new`, `/status`, `/getresult`, `/api/v1/optimizations/*`, –≤–∞–ª–∏–¥–∞—Ü–∏—è DTO, OpenAPI-—Å–ø–µ–∫–∞.
2. **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–¥–∞—á**: JPA + PostgreSQL, —Å—Ç–∞—Ç—É—Å—ã RUNNING/DONE/FAILED, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ (ThreadPool + @Async).
3. **LLM-–∞–≥–µ–Ω—Ç (QueryOptimizerAgent)**:

   * —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –≤–µ—Å—É (`runquantity * executiontime`),
   * –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤,
   * –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ `EXPLAIN LOGICAL`, `DISTRIBUTED`, `IO`, `ANALYZE`, `ANALYZE VERBOSE` —á–µ—Ä–µ–∑ JDBC,
   * –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—ã–±–æ—Ä–∞ –º–æ–¥–µ–ª–∏ (`llmModel`) –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã (`temperature`),
   * –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç (–±—é–¥–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é).
4. **–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤**:

   * —Å–æ–±–∏—Ä–∞–µ—Ç –Ω–æ–≤—ã–µ DDL,
   * –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏,
   * —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã.
5. **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: —Ç–∞–±–ª–∏—Ü—ã `tasks`, `task_input`, `task_result` —Å JSONB –¥–ª—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, —Ç–∞–±–ª–∏—Ü–∞ ¬´—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏¬ª.
6. **–í–∞–ª–∏–¥–∞—Ü–∏—è (Validation)**:

   * –ª–æ–∫–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö DDL/SQL –Ω–∞ —Å—Ç–µ–Ω–¥–µ Trino + Iceberg,
   * —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å—Ç–∞—Ä—ã—Ö –∏ –Ω–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤,
   * –∞–≤—Ç–æ-—Ñ–∏–∫—Å—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (—á–µ—Ä–µ–∑ LLM).
7. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Tool Calling**: Redis –¥–ª—è EXPLAIN/ANALYZE, –ø—Ä–æ–≥—Ä–µ–≤ –∫—ç—à–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∑–∞–¥–∞—á–∏.
8. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: HTTP Basic Auth (–ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –æ–∫—Ä—É–∂–µ–Ω–∏–µ).
9. **Swagger/OpenAPI**: —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API –ª–æ–∫–∞–ª—å–Ω–æ –∏ —á–µ—Ä–µ–∑ docker-compose.

---

## API

### –≠–Ω–¥–ø–æ–π–Ω—Ç—ã

* **POST `/new`** ‚Äî –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞—á–∏.
  –í—Ö–æ–¥ (–º–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä):

  ```json
  {
    "url": "jdbc:trino://host:port?user=xxx&password=yyy",
    "ddl": [ { "statement": "CREATE TABLE ..." } ],
    "queries": [
      { "queryid": "uuid", "query": "SELECT ...", "runquantity": 10, "executiontime": 5 }
    ]
  }
  ```

  –í—Ö–æ–¥ (—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º LLM):

  ```json
  {
    "llmModel": "gpt-4o",
    "temperature": 0.4,
    "url": "jdbc:trino://host:port?user=xxx&password=yyy",
    "ddl": [ { "statement": "CREATE TABLE ..." } ],
    "queries": [
      { "queryid": "uuid", "query": "SELECT ...", "runquantity": 10, "executiontime": 5 }
    ]
  }
  ```

  –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å JDBC URL –±–µ–∑ `/catalog/schema` –≤ –ø—É—Ç–∏, –ø—Ä–∏ —ç—Ç–æ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¢–ó –∫ –ø–æ–ª–Ω—ã–º –∏–º–µ–Ω–∞–º –æ–±—ä–µ–∫—Ç–æ–≤ `<catalog>.<schema>.<table>` —Å–æ–±–ª—é–¥–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ DDL/SQL.

  –í—ã—Ö–æ–¥: `{ "taskid": "uuid" }`.

* **GET `/status?task_id=...`** ‚Äî —Å—Ç–∞—Ç—É—Å: `RUNNING | DONE | FAILED`.

* **GET `/getresult?task_id=...`** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

  ```json
  {
    "ddl": [ { "statement": "..." } ],
    "migrations": [ { "statement": "INSERT ..." } ],
    "queries": [ { "queryid": "uuid", "query": "SELECT ..." } ]
  }
  ```

* **POST `/api/v1/optimizations/new`** ‚Äî —Å–æ–∑–¥–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é.
  –¢–µ–ª–æ: `{ "text": "‚Ä¶" }`
  –û—Ç–≤–µ—Ç: `{ "id": "uuid" }`

* **POST `/api/v1/optimizations/{id}/activate`** ‚Äî –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é.

* **POST `/api/v1/optimizations/{id}/deactivate`** ‚Äî –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é.

* **GET `/api/v1/optimizations/{id}`** ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é.

* **GET `/api/v1/optimizations`** ‚Äî —Å–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π.

–ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥–º–µ—à–∏–≤–∞—é—Ç—Å—è –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç LLM.

---

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¢–ó

* –¢–∞–π–º–∞—É—Ç –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–¥–∞—á–∏ —Å–µ—Ä–≤–∏—Å–æ–º: **20 –º–∏–Ω—É—Ç**.
* –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥—ë—Ç —Å—Ç—Ä–æ–≥–æ –≤ –ø–æ—Ä—è–¥–∫–µ: DDL ‚Üí migrations ‚Üí queries.

---

## –ê–ª–≥–æ—Ä–∏—Ç–º —Ä–∞–±–æ—Ç—ã

1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Ö–æ–¥–∞: DDL, —Å–ø–∏—Å–æ–∫ –∑–∞–ø—Ä–æ—Å–æ–≤, jdbc url, –ø–∞—Ä–∞–º–µ—Ç—Ä—ã LLM.
2. –ò–Ω—Å–ø–µ–∫—Ü–∏—è –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ –≤–µ—Å—É.
3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ LLM –∏ Trino EXPLAIN/ANALYZE (—Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ Redis).
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω—ã—Ö DDL –∏ –º–∏–≥—Ä–∞—Ü–∏–π.
5. –õ–æ–∫–∞–ª—å–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è (Trino + Iceberg).
6. –ê–≤—Ç–æ-—Ñ–∏–∫—Å—ã —á–µ—Ä–µ–∑ LLM –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö.
7. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –≤—ã–¥–∞—á–∞ –∫–ª–∏–µ–Ω—Ç—É.

---

## –°—Ö–µ–º–∞ –ë–î

```mermaid
erDiagram
    tasks {
        uuid id PK
        timestamp created_at
        timestamp updated_at
        varchar(64) llm_model
        double temperature
        enum status
        text error
    }
    task_input {
        uuid id PK
        timestamp created_at
        timestamp updated_at
        uuid task_id FK
        jsonb payload
    }
    task_result {
        uuid id PK
        timestamp created_at
        timestamp updated_at
        uuid task_id FK
        jsonb ddl
        jsonb migrations
        jsonb queries
    }
    optimization {
        uuid id PK
        timestamp created_at
        timestamp updated_at
        text text
        boolean active
    }
    method_stats {
        uuid id PK
        timestamp created_at
        timestamp updated_at
        varchar(255) stats_key
        double avg_time_ms
        bigint total_count
        bigint success_count
        bigint error_count
    }
    tasks ||--|| task_input : has_input
    tasks ||--o| task_result : has_result
```

---

## –¢–∞–π–º–∞—É—Ç—ã –∏ —Ç–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç

* –û–±—â–∏–π –±—é–¥–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–∏: `processing.max-total-duration-ms` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 200 000 –º—Å ‚âà 20 –º–∏–Ω).
* LLM: `llm.timeout-seconds` (env `LLM_TIMEOUT_SECONDS`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60—Å).
* Trino (JdbcTemplate): `spring.jdbc.template.trino.query-timeout` (env `TRINO_QUERY_TIMEOUT`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20—Å).

–ê–≥–µ–Ω—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç —Å—Ä–µ–¥–Ω—é—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å LLM-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–≤–µ—Ä—à–∞–µ—Ç –∏—Ç–µ—Ä–∞—Ü–∏–∏ –∑–∞—Ä–∞–Ω–µ–µ, —á—Ç–æ–±—ã —É–ª–æ–∂–∏—Ç—å—Å—è –≤ –ª–∏–º–∏—Ç.

---

## –ó–∞–ø—É—Å–∫ –ª–æ–∫–∞–ª—å–Ω–æ (docker-compose)

```bash
docker compose up -d
```

–î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º:

* Vibe Data API: [http://localhost:8086](http://localhost:8086) (Swagger: /swagger-ui/index.html)
* Trino: [http://localhost:18080](http://localhost:18080)
* Redis: localhost:26379
* Postgres: localhost:25436 (–ë–î vibedata)
* MinIO: [http://localhost:9000](http://localhost:9000) (Console: [http://localhost:9001](http://localhost:9001), admin/password)

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∫–ª—é—á–µ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)

**LLM:**

* `llm.llm-model` ‚Äî –º–æ–¥–µ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (gpt-4o)
* `llm.temperature` ‚Äî —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (0.5)
* `llm.valid-models` ‚Äî —Å–ø–∏—Å–æ–∫ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –º–æ–¥–µ–ª–µ–π
* `llm.timeout-seconds` ‚Äî —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ LLM (—Å–µ–∫)

**Trino/Tool Calling:**

* `spring.jdbc.template.trino.query-timeout` ‚Äî —Ç–∞–π–º–∞—É—Ç JDBC (—Å–µ–∫)

**Validation:**

* `validation.enabled` ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é
* `validation.max-attempts` ‚Äî —á–∏—Å–ª–æ –∞–≤—Ç–æ-–ø–æ–ø—ã—Ç–æ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3)

**–¢–∞–π–º-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç:**

* `processing.max-total-duration-ms` ‚Äî –æ–±—â–∏–π –±—é–¥–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–∏
* `processing.default-llm-avg-ms` ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ LLM (–º—Å)

**–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ:**

* `spring.cache.type=redis`
* `spring.cache.redis.time-to-live=2h`
* `spring.data.redis.host/port/password`

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

* –î–æ—Å—Ç—É–ø –∫ API –∑–∞—â–∏—â—ë–Ω Basic Auth.
* –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

  * `BASIC_AUTH_USERNAME`
  * `BASIC_AUTH_PASSWORD`

---

## –§–∞–π–ª .env –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–µ—Ä–≤–∏—Å —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–∑ —Ñ–∞–π–ª–∞ .env (–ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –≤ docker-compose —á–µ—Ä–µ–∑ env_file: .env –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ vibe-data).

–ú–∏–Ω–∏–º–∞–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞:

- OPENAI_API_KEY ‚Äî API‚Äë–∫–ª—é—á –¥–ª—è Spring AI (OpenAI). –ë–µ–∑ –Ω–µ–≥–æ LLM‚Äë–∞–≥–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ –±—É–¥–µ—Ç.
- BASIC_AUTH_USERNAME ‚Äî –ª–æ–≥–∏–Ω –¥–ª—è HTTP Basic Auth (–¥–æ—Å—Ç—É–ø –∫ API).
- BASIC_AUTH_PASSWORD ‚Äî –ø–∞—Ä–æ–ª—å –¥–ª—è HTTP Basic Auth.

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

- TRINO_QUERY_TIMEOUT ‚Äî —Ç–∞–π–º–∞—É—Ç JDBC-–∑–∞–ø—Ä–æ—Å–∞ –∫ Trino –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 20).
- VALIDATION_ENABLED ‚Äî –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –≤–∞–ª–∏–¥–∞—Ü–∏—é DDL/SQL (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é true).
- VALIDATION_MAX_ATTEMPTS ‚Äî —á–∏—Å–ª–æ –∞–≤—Ç–æ‚Äë–ø–æ–ø—ã—Ç–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3).
- LLM_TIMEOUT_SECONDS ‚Äî —Ç–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–∞ –∫ LLM –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60).
- PROCESSING_MAX_TOTAL_MS ‚Äî –æ–±—â–∏–π –±—é–¥–∂–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –≤–µ—Å—å –ø—Ä–æ—Ü–µ—Å—Å, –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1 200 000 ‚âà 20 –º–∏–Ω).
- PROCESSING_DEFAULT_LLM_MS ‚Äî —Å—Ç–∞—Ä—Ç–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ —Å—Ä–µ–¥–Ω–µ–π –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ LLM‚Äë–∑–∞–ø—Ä–æ—Å–∞, –º—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 40000).

–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –≤ docker-compose —ç—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–∫—Ä–æ–º–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏–∑ .env) —É–∂–µ –∑–∞–¥–∞–Ω—ã –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

–ü—Ä–∏–º–µ—Ä .env:

```
# –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ
OPENAI_API_KEY=sk-...your_key...
BASIC_AUTH_USERNAME=javaboys
BASIC_AUTH_PASSWORD=change_me
